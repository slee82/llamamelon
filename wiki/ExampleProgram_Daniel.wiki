#summary Daniel’s Example program.
#labels Phase-Design

=I’m working on this.=

=The program:=

{{{
/* Got the calculations from : http://sbs-baseball.com/theory.txt */

/***********************/
/***STATS DEFINITION***/

/*Batter plate appearances*/
stat bPA = AB + BB;

/*Batter probabilities*/
stat bWalk = BB / bPA;
stat bSingle = (Hits - (2B + 3B + HR))/ bPA;
stat bDouble = 2B / bPA;
stat bTriple = 3B / bPA;
stat bHR = HR / bPA;
stat bOut = 1 - (bWalk + bSingle + bDouble + bTriple + bHR);

/*Pitcher Batters Faced*/
stat pBF = (IP * 3) + Hits + BB;

/*Pitcher probabilities*/
stat pWalk = BB / pBF;
stat pSingle = (Hits / BF) - pHR - pTriple - pDouble;
stat pDouble = Hits x .174 / BF;
stat pTriple = Hits x .024 / BF;
stat pHR = HR / BF;

/***END STATS DEFINITION***/
/**************************/

/*Global variables that hold combined probabilities given a pitcher and a batter*/
number probWalk = 0;
number probSingle = 0;
number probDouble = 0;
number probTriple = 0;
number probHR = 0;


/*Basic Simulation function: simplifies the problem by pretending that
this is a game between the batter and the pitcher. To further simplify
the problem: let’s assume that a home run is worth 1 point to the batting 
team, singles and walks are worth 1/4 of a point, doubles are 1/2 a point
and triples are 3/4 of a point.*/
simfunction basicSimulation is:



end;


/*Declaring a general-purpose function that calculates
combined probabilities given a pitcher and a batter.
It takes the max of both: average is not a good estimate.*/
function combinedProb (player batter, player pitcher) is:

  /*Having Min and Max functions can be useful in situations like these*/
  probWalk = max(pitcher's pWalk, batter's bWalk);
  probSingle = max(pitcher's pSingle, batter's bSingle);
  probDouble = max(pitcher's pDouble, batter's bDouble);
  probTriple = max(pitcher's pTriple, batter's bTriple);
  probHR = max(pitcher's pHR, batter's bHR);

end;

/*This makes simFunc the active simulation function, for use in the
  following nested simulations (so we don’t have to pass it multiple times).*/
activate basicSimulation;

sim((Astros, Dodgers, 3), (Orioles, Twins, 3), 3);
}}}

=Further explanations:=